<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
	<metaname="screen-orientation"content="portrait">
	<metaname="x5-orientation"content="portrait">
	<title>mi</title>
	<link rel="stylesheet" href="css/main.css">
</head>
<body>
	<div id="download_app">
		<a href="#">
			<img src="imgs/ios.png" alt="">
		</a>
		<div class="close">
			<img src="imgs/top-x.png" alt="">
		</div>
	</div>
	<header>
		<a href="#">
			<span></span>
			<span>搜索商品名称</span>
		</a>
		<div></div>
	</header>
	<div id="wrap">
		<div class="content1"  id="content1">
			<div id="focus_picture">
				<div data-index=0 class="picture_box">
					<a href="#"><img src="imgs/picture1.jpg" alt=""></a>
				</div>	
				<div data-index=1 class="picture_box">
					<a href="#"><img src="imgs/picture2.jpg" alt=""></a>
				</div>
				<div data-index=2 class="picture_box">
					<a href="#"><img src="imgs/picture3.jpg" alt=""></a>
				</div>
			</div>			
			<ul id="focus_nav">
				<li></li>
				<li></li>
				<li></li>
			</ul>
		</div>
		<div class="content2">
			<div data-id="3868" class="cont2_1 cont2">
				<img src="imgs/cont2_1.png" alt="" />
			</div>
			<div data-id="3905" class="cont2_2 cont2">
				<img src="imgs/cont2_2.png" alt="" />
			</div>
			<div data-id="3096" class="cont2_3 cont2">
				<img src="imgs/cont2_3.png" alt="" />
			</div>
			<div data-id="4026" class="cont2_4 cont2">
				<img src="imgs/cont2_4.png" alt="" />
			</div>
			<div data-id="3655" class="cont2_5 cont2">
				<img src="imgs/cont2_5.png" alt="" />
			</div>
			<div data-id="4290" class="cont2_6 cont2">
				<img src="imgs/cont2_6.png" alt="" />
			</div>
		</div>
		<div class="content3">
			<div data-id="4092" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_4092.jpg" alt="">
				</div>
				<div class="right">
					<p>红米Note 4</p>
					<p>Helio X20 十核旗舰处理器 / 全金属一体化机身 / 4100mAh 大电量</p>
					<p>899元 起</p>
				</div>
			</div>
			<div data-id="4081" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_4081.jpg" alt="">
					<img class="tag" src="imgs/xp.png" alt="">
				</div>
				<div class="right">
					<p>小米笔记本Air</p>
					<p>轻薄全金属机身 / 11.5 小时超长续航，支持1C快充  / Intel 酷睿m3 处理器 / FHD 全贴合屏幕</p>
					<p>3499元</p>
				</div>
			</div>
			<div data-id="3905" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_3905.jpg" alt="">
					<img class="tag" src="imgs/xp.png" alt="">
				</div>
				<div class="right">
					<p>红米手机3X</p>
					<p>高通骁龙430 八核处理器 / 2GB内存 + 32GB存储 / 标配指纹识别 / 全网通 4G双卡双待 / 高光亮边金属机身</p>
					<p>799元</p>
				</div>
			</div>
			<div data-id="4025" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_4025.jpg" alt="">
					<img class="tag" src="imgs/xp.png" alt="">
				</div>
				<div class="right">
					<p>红米Pro</p>
					<p>硬件级实时背景虚化 / Helio X20 十核旗舰处理 / 5.5” OLED 超鲜艳屏幕 / 拉丝全金属机身</p>
					<p>1499元 起</p>
				</div>
			</div>
			<div data-id="1160700019" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_1160700019.jpg" alt="">
				</div>
				<div class="right">
					<p>小米手机5 标准版 / 高配版</p>
					<p>骁龙820处理器 / 4轴防抖相机 / 新增支持双开微信，能刷公交卡、银行卡</p>
					<p>1799元 起</p>
				</div>
			</div>
			<div data-id="3281" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_3281.jpg" alt="">
				</div>
				<div class="right">
					<p>小米5 尊享版</p>
					<p>骁龙820处理器 / 4GB 内存 / 128GB 闪存 / 4轴防抖相机 / 3D陶瓷机身</p>
					<p>2499元</p>
				</div>
			</div>
			<div data-id="340" class="cont3">
				<div class="left">
					<img class="l_img" src="imgs/cont3_340.jpg" alt="">
				</div>
				<div class="right">
					<p>小米Max全网通</p>
					<p>6.44"大屏黄金尺寸 / 4850mAh 大电量 / 指纹识别 / 2.5D玻璃</p>
					<p>1499元 起</p>
				</div>
			</div>
		</div>
		<div class="content4">
			<div class="cont4_l">
				<img src="imgs/rwx.jpg" alt="">
			</div>
			<div class="cont4_r">
				<img src="imgs/cdb.jpg" alt="">
			</div>
		</div>
	</div>
	<footer>
		<ul class="footer_ul">
			<li>
				<a href="#" class="f_a">
					<div class="ispr" id="ia"></div>
					<p>商城</p>
				</a>
			</li>
			<li>
				<a href="#" class="f_a">
					<div class="ispr" id="ib"></div>
					<p>分类</p>
				</a>
			</li>
			<li>
				<a href="#" class="f_a">
					<div class="ispr" id="ic"></div>
					<p>购物车</p>
				</a>
			</li>
			<li>
				<a href="#" class="f_a">
					<div class="ispr" id="id"></div>
					<p>服务</p>
				</a>
			</li>
		</ul>
	</footer>
	<script src="js/zepto.js"></script>
	<script src="js/event.js"></script>
	<script src="js/touch.js"></script>
	<script src="js/data.js"></script>
	<script>	
		$(document).ready(function () {
			var winW=document.body.clientWidth;
			document.documentElement.style.fontSize=(57.5/414)*winW+'px';
			var T=null;
			$("#focus_picture").css('width',winW*4);
			console.log($("#focus_picture")[0].style.width);
			var p_bs=$(".picture_box");
			p_bs.each(function () {
				this.style.width=winW+'px';
				console.log(this.style.width);
			})
			function orientationChange(){
				console.log(window.orientation);
				switch(window.orientation){
					case 0:
						console.log('0, screen-width:'+screen.width+', screen-height:'+screen.height+',可视区宽:'+document.documentElement.clientWidth+',可视区高:'+document.documentElement.clientHeight);
						break;
					case 90:
						console.log('90, screen-width:'+screen.width+', screen-height:'+screen.height+',可视区宽:'+document.documentElement.clientWidth+',可视区高:'+document.documentElement.clientHeight);
						break;
					case -90:
						console.log('-90, screen-width:'+screen.width+', screen-height:'+screen.height+',可视区宽:'+document.documentElement.clientWidth+',可视区高:'+document.documentElement.clientHeight);
						break;
					case 180: //貌似看不到这种角度
						console.log('180, screen-width:'+screen.width+', screen-height:'+screen.height+',可视区宽:'+document.documentElement.clientWidth+',可视区高:'+document.documentElement.clientHeight);
						break;	
				}	
			}
			orientationChange()
			window.onOrientationchange=orientationChange;
			console.log(window.onOrientationchange);
			var p_before=2;
			var p_index=0;
			var p_next=1;
			p_bs[0].style.transform='translate(0px, 0px) translateZ(0px)';
			p_bs[1].style.transform='translate('+winW+'px, 0px) translateZ(0px)';
			p_bs[1].style.left='-'+winW+'px';
			p_bs[2].style.transform='translate(-'+winW+'px, 0px) translateZ(0px)';
			p_bs[2].style.left='-'+winW*2+'px';
			clearInterval(T);
			T=setInterval(goNext,3000)	
			var content1=$("#content1");
			var focus_picture=$("#focus_picture");
			var startX=0;
			var x=0;
			// content1.on({
			// 	swipeLeft:function () {
			// 		clearInterval(T);
			// 		goNext();
			// 		T=setInterval(goNext,3000);
			// 	},swipeRight:function () {
			// 		clearInterval(T);
			// 		goBefore();
			// 		T=setInterval(goNext,3000);
			// 	}
			// })
			content1.on({touchstart:function (event) {
				clearInterval(T);
				startX=event.touches[0].pageX;
				p_bs[p_before].style.transitionDuration='0ms';
				p_bs[p_index].style.transitionDuration='0ms';
				p_bs[p_next].style.transitionDuration='0ms';
			},'touchmove':function (event) {
				x=event.touches[0].pageX;	
				p_bs[p_before].style.transform='translate('+(-winW+x-startX)+'px, 0px) translateZ(0px)';
				p_bs[p_index].style.transform='translate('+(0+x-startX)+'px, 0px) translateZ(0px)';
				p_bs[p_next].style.transform='translate('+(winW+x-startX)+'px, 0px) translateZ(0px)';
			},touchend:function (event) {	
				if (x-startX<(-winW/2)) {
					goNext()

				}else if(x-startX>winW/2) {
					goBefore() 
				}
				 else {
					p_bs[p_before].style.transitionDuration='300ms';
					p_bs[p_before].style.transform='translate(-'+winW+'px, 0px) translateZ(0px)';
					p_bs[p_index].style.transitionDuration='300ms';
					p_bs[p_index].style.transform='translate(0px, 0px) translateZ(0px)';
					p_bs[p_next].style.transitionDuration='300ms';
					p_bs[p_next].style.transform='translate('+winW+'px, 0px) translateZ(0px)';
				 }
				startX=x;
			}});
			
			function goNext() {
				p_bs[p_before].style.transitionDuration='0ms';
				p_bs[p_before].style.transform='translate('+winW+'px, 0px) translateZ(0px)';
				p_bs[p_index].style.transitionDuration='300ms';
				p_bs[p_index].style.transform='translate(-'+winW+'px, 0px) translateZ(0px)';
				p_bs[p_next].style.transitionDuration='300ms';
				p_bs[p_next].style.transform='translate(0px, 0px) translateZ(0px)';
				p_index=setNext(p_index);
				p_before=setNext(p_before);
				p_next=setNext(p_next);	
			}
			function goBefore() {
				p_bs[p_before].style.transitionDuration='300ms';
				p_bs[p_before].style.transform='translate(0px, 0px) translateZ(0px)';
				p_bs[p_index].style.transitionDuration='300ms';
				p_bs[p_index].style.transform='translate('+winW+'px, 0px) translateZ(0px)';
				p_bs[p_next].style.transitionDuration='0ms';
				p_bs[p_next].style.transform='translate(-'+winW+'px, 0px) translateZ(0px)';
				p_index=setBefore(p_index);
				p_before=setBefore(p_before);
				p_next=setBefore(p_next);	
			}
			function setNext(e) {
				return e==p_bs.length-1?0:(e+1)
			}
			function setBefore(e) {
				return e==0?p_bs.length-1:(e-1)
			}	
		});
	</script>

</body>
</html>